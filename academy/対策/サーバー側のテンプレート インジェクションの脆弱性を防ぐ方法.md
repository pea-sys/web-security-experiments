# サーバー側のテンプレート インジェクションの脆弱性を防ぐ方法

サーバー側のテンプレート インジェクションを防ぐ最善の方法は、ユーザーに新しいテンプレートの変更や送信を許可しないことです。ただし、ビジネス要件によりこれが避けられない場合があります。

サーバー側のテンプレート インジェクションの脆弱性の導入を回避する最も簡単な方法の 1 つは、絶対に必要な場合を除き、Mustache などの「ロジックレス」テンプレート エンジンを常に使用することです。ロジックをプレゼンテーションからできるだけ分離すると、最も危険なテンプレートベースの攻撃にさらされる可能性を大幅に減らすことができます。

もう 1 つの対策は、潜在的に危険なモジュールや機能が完全に削除されたサンドボックス環境でのみユーザーのコードを実行することです。残念ながら、信頼できないコードのサンドボックス化は本質的に難しく、バイパスされやすいです。

最後に、もう 1 つの補完的なアプローチは、任意のコードの実行がほぼ避けられないことを受け入れ、たとえば、ロックダウンされた Docker コンテナーにテンプレート環境をデプロイすることで独自のサンドボックスを適用することです。
